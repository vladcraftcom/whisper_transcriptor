# Whisper Transcriptor

Небольшое кроссплатформенное “оконное” приложение на **C#/.NET + Avalonia**, которое:

- **скачивает локальную модель Whisper (whisper.cpp через `whisper.net`)** при необходимости
- **принимает на вход аудиофайл** (пока только файлы, без потоков)
- **делает speech‑to‑text**
- **сохраняет результат в `.txt`**

## Требования

- **.NET SDK** (проект собирается на `net9.0`)
- **ffmpeg в PATH** (Windows/macOS/Linux) — используется для приведения входного аудио к WAV 16kHz mono (`pcm_s16le`)
- **LibVLC (для вкладки Видео)**:
  - Windows/macOS: подтягивается через NuGet (`VideoLAN.LibVLC.*`)
  - Linux: обычно нужен установленный системный `libvlc`/VLC (иначе видеоплеер не стартанёт)

## Запуск из исходников

```bash
dotnet restore
dotnet run
```

## Как пользоваться

### Аудио

1. Вкладка **«Аудио»** → **«Выбрать…»** и выбрать аудиофайл.
2. Выбрать модель (или оставить как есть).
3. **«Транскрибировать»** — результат сохранится в `.txt`.

### Видео (аниме → субтитры)

1. Вкладка **«Видео»** → **«Выбрать видео…»**.
2. **«Субтитры → (re)generate»**:
   - извлечёт аудио через ffmpeg
   - прогонит через Whisper
   - сохранит субтитры в `subs/` возле исполняемого файла (`.srt` и `.vtt`)
3. Перемотка ползунком под видео синхронно переключает субтитры.
4. Справа можно редактировать сегменты и подгонять тайминги кнопками `±100ms/±500ms`.

## Где хранятся модели

Модели скачиваются в папку пользовательских данных приложения:

- `.../WhisperTranscriptor/models/`

(путь зависит от ОС; приложение берёт `Environment.SpecialFolder.ApplicationData`).